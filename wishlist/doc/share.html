<!DOCTYPE html><html lang="en"><head><title>share</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content=""><meta name="groc-document-path" content="share"><meta name="groc-project-path" content="share.js"><link rel="stylesheet" type="text/css" media="all" href="assets/style.css"><script type="text/javascript" src="assets/behavior.js"></script><body><div id="meta"><div class="file-path">share.js</div></div><div id="document"><div class="segment"><div class="comments"><div class="wrapper"><h1 id="share">Share</h1></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>To showcase the share module, its settings and API, we'll take an todo app
as example. I can create multiple todo lists with it and can share these.</p></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><h2 id="share-options">Share options</h2>

<ul>
<li>access     (default: false)</li>
<li>password   (default: <em>no password</em>)</li>
</ul></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><h3 id="theaccesssettingdefaultfalse">the <code>access</code> setting (default: false)</h3>

<p>the access setting defines which user (group) has read or write access.
When set to true, the sharing is public and everybody who knows the share
id can access and edit it. To limit to read only, set access to read: true.
You can also define specific user names to give them access. Write access
does always include read access as well.</p></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p><em>access: false</em> (default)
Nobody but me can access the todolist, until I make
the share public or invite readers / writers to it.</p></div></div><div class="code"><div class="wrapper"><span class="nx">share</span> <span class="o">=</span> <span class="nx">hoodie</span><span class="p">.</span><span class="nx">share</span><span class="p">.</span><span class="nx">create</span><span class="p">();</span>
<span class="nx">share</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">todolist</span><span class="p">);</span>
<span class="nx">share</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">todolist</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;owner&#39;</span><span class="p">]);</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>access: true
Everybody will be able to acces and edit the todo list</p></div></div><div class="code"><div class="wrapper"><span class="nx">share</span> <span class="o">=</span> <span class="nx">hoodie</span><span class="p">.</span><span class="nx">share</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span> <span class="p">{</span><span class="nx">access</span><span class="o">:</span> <span class="kc">true</span><span class="p">}</span> <span class="p">);</span>
<span class="nx">share</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">todolist</span><span class="p">);</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>access: [user1, user2]
Besides me, only user1 and user2 will have access to the todolist</p></div></div><div class="code"><div class="wrapper"><span class="nx">share</span> <span class="o">=</span> <span class="nx">hoodie</span><span class="p">.</span><span class="nx">share</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span> <span class="p">{</span><span class="nx">access</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;aj@foo.com&#39;</span><span class="p">,</span> <span class="s1">&#39;bj@foo.com&#39;</span><span class="p">]}</span> <span class="p">);</span>
<span class="nx">share</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">todolist</span><span class="p">);</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>access: {read: true}
Everybody will be able to acces the todo list, but only I can edit it</p></div></div><div class="code"><div class="wrapper"><span class="nx">share</span> <span class="o">=</span> <span class="nx">hoodie</span><span class="p">.</span><span class="nx">share</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span><span class="nx">access</span><span class="o">:</span> <span class="p">{</span><span class="nx">read</span><span class="o">:</span> <span class="kc">true</span><span class="p">}});</span>
<span class="nx">share</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">todolist</span><span class="p">);</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>access: {read: true, write: [user1, user2]}
Everybody will be able to acces the todo list,
but only user1, user2 and me can edit it</p></div></div><div class="code"><div class="wrapper"><span class="nx">share</span> <span class="o">=</span> <span class="nx">hoodie</span><span class="p">.</span><span class="nx">share</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
  <span class="nx">access</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">write</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;aj@foo.com&#39;</span><span class="p">,</span> <span class="s1">&#39;bj@foo.com&#39;</span><span class="p">]</span>
  <span class="p">}</span>
<span class="p">});</span>
<span class="nx">share</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">todolist</span><span class="p">).</span><span class="nx">push</span><span class="p">();</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>access: {read: [user1, user2], write: [user3]}
Besides me, only user1, user and user3 will have access to the
todolist and only CJ and me can edit it</p></div></div><div class="code"><div class="wrapper"><span class="nx">share</span> <span class="o">=</span> <span class="nx">hoodie</span><span class="p">.</span><span class="nx">share</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
  <span class="nx">access</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">read</span><span class="o">:</span>  <span class="p">[</span><span class="s1">&#39;aj@foo.com&#39;</span><span class="p">,</span> <span class="s1">&#39;bj@foo.com&#39;</span><span class="p">],</span>
    <span class="nx">write</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;cj@foo.com&#39;</span><span class="p">]</span>
  <span class="p">}</span>
<span class="p">});</span>
<span class="nx">share</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">todolist</span><span class="p">).</span><span class="nx">push</span><span class="p">();</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><h3 id="thepasswordsetting">the <code>password</code> setting</h3></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>password not set (default)
everybody can access the share with the share.id</p></div></div><div class="code"><div class="wrapper"><span class="nx">hoodie</span><span class="p">.</span><span class="nx">share</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span><span class="nx">access</span><span class="o">:</span> <span class="kc">true</span><span class="p">});</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>password set to "secret"
Others will need both the share.id and
the password in order to access the share</p></div></div><div class="code"><div class="wrapper"><span class="nx">hoodie</span><span class="p">.</span><span class="nx">share</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span><span class="nx">access</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">password</span><span class="o">:</span> <span class="s2">&quot;secret&quot;</span><span class="p">});</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><h2 id="share-api">Share API</h2></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><h3 id="share-module-methods">Share Module methods</h3></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><ul>
<li>direct call
opens a share, gives access to its api</li>
</ul></div></div><div class="code"><div class="wrapper"><span class="nx">hoodie</span><span class="p">.</span><span class="nx">share</span><span class="p">(</span><span class="s2">&quot;share_id&quot;</span><span class="p">);</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><ul>
<li>open
same as direct call</li>
</ul></div></div><div class="code"><div class="wrapper"><span class="nx">hoodie</span><span class="p">.</span><span class="nx">share</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s2">&quot;share_id&quot;</span><span class="p">);</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><ul>
<li>create
create a new share</li>
</ul></div></div><div class="code"><div class="wrapper"><span class="nx">hoodie</span><span class="p">.</span><span class="nx">share</span><span class="p">.</span><span class="nx">create</span><span class="p">({});</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><ul>
<li>find
find an existing sharings</li>
</ul></div></div><div class="code"><div class="wrapper"><span class="nx">hoodie</span><span class="p">.</span><span class="nx">share</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">share_id</span><span class="p">);</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><ul>
<li>findOrCreate
finds an existing sharing, otherwise creates it</li>
</ul></div></div><div class="code"><div class="wrapper"><span class="nx">hoodie</span><span class="p">.</span><span class="nx">share</span><span class="p">.</span><span class="nx">findOrCreate</span><span class="p">(</span><span class="nx">share_attributes</span><span class="p">);</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><ul>
<li>findAll
find all my sharings</li>
</ul></div></div><div class="code"><div class="wrapper"><span class="nx">hoodie</span><span class="p">.</span><span class="nx">share</span><span class="p">.</span><span class="nx">findAll</span><span class="p">();</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><ul>
<li>save
overwrites or creates a new share</li>
</ul></div></div><div class="code"><div class="wrapper"><span class="nx">hoodie</span><span class="p">.</span><span class="nx">share</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span><span class="s1">&#39;share_id&#39;</span><span class="p">,</span> <span class="p">{});</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><ul>
<li>update
updates an existing share</li>
</ul></div></div><div class="code"><div class="wrapper"><span class="nx">hoodie</span><span class="p">.</span><span class="nx">share</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="s1">&#39;share_id&#39;</span><span class="p">,</span> <span class="nx">changed_attributes</span><span class="p">);</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><ul>
<li>updateAll
update all my sharings</li>
</ul></div></div><div class="code"><div class="wrapper"><span class="nx">hoodie</span><span class="p">.</span><span class="nx">share</span><span class="p">.</span><span class="nx">updateAll</span><span class="p">({</span><span class="nx">access</span><span class="o">:</span> <span class="kc">false</span><span class="p">});</span>
<span class="nx">hoodie</span><span class="p">.</span><span class="nx">share</span><span class="p">.</span><span class="nx">updateAll</span><span class="p">(</span> <span class="kd">function</span><span class="p">(</span><span class="nx">share</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">share</span><span class="p">.</span><span class="nx">access</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">});</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><ul>
<li>destroy
deletes a share</li>
</ul></div></div><div class="code"><div class="wrapper"><span class="nx">hoodie</span><span class="p">.</span><span class="nx">share</span><span class="p">.</span><span class="nx">destroy</span><span class="p">(</span><span class="s1">&#39;share_id&#39;</span><span class="p">);</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><ul>
<li>destroyAll
delete all my shares</li>
</ul></div></div><div class="code"><div class="wrapper"><span class="nx">hoodie</span><span class="p">.</span><span class="nx">share</span><span class="p">.</span><span class="nx">destroyAll</span><span class="p">();</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><h3 id="share-instance-methods">Share Instance methods</h3>

<p>A Share inherits from the RemoteStore Module and gets namespaced by
its id. It adds additional methods to add and remove objects and alters
methods save, update and delete so when these are called withoud type
and id, they get applied on the share object directly.</p></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><ul>
<li>save
save a share, overwrites all settings if share existed before</li>
</ul></div></div><div class="code"><div class="wrapper"><span class="nx">hoodie</span><span class="p">.</span><span class="nx">share</span><span class="p">(</span><span class="s2">&quot;share_id&quot;</span><span class="p">).</span><span class="nx">save</span><span class="p">({});</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><ul>
<li>update <br />
update an existing setting, only passed attributes get changed</li>
</ul></div></div><div class="code"><div class="wrapper"><span class="nx">hoodie</span><span class="p">.</span><span class="nx">share</span><span class="p">(</span><span class="s2">&quot;share_id&quot;</span><span class="p">).</span><span class="nx">update</span><span class="p">({});</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><ul>
<li>destroy <br />
deletes a share, unshares all its objects</li>
</ul></div></div><div class="code"><div class="wrapper"><span class="nx">hoodie</span><span class="p">.</span><span class="nx">share</span><span class="p">(</span><span class="s2">&quot;share_id&quot;</span><span class="p">).</span><span class="nx">destroy</span><span class="p">();</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><ul>
<li>add
add object(s) to the share</li>
</ul></div></div><div class="code"><div class="wrapper"><span class="nx">hoodie</span><span class="p">.</span><span class="nx">share</span><span class="p">(</span><span class="s2">&quot;share_id&quot;</span><span class="p">).</span><span class="nx">add</span><span class="p">(</span><span class="nx">object</span><span class="p">);</span>
<span class="nx">hoodie</span><span class="p">.</span><span class="nx">share</span><span class="p">(</span><span class="s2">&quot;share_id&quot;</span><span class="p">).</span><span class="nx">add</span><span class="p">([</span><span class="nx">object1</span><span class="p">,</span> <span class="nx">object2</span><span class="p">]);</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><ul>
<li>remove <br />
remove object(s) from the share</li>
</ul></div></div><div class="code"><div class="wrapper"><span class="nx">hoodie</span><span class="p">.</span><span class="nx">share</span><span class="p">(</span><span class="s2">&quot;share_id&quot;</span><span class="p">).</span><span class="nx">remove</span><span class="p">(</span><span class="nx">object</span><span class="p">);</span>
<span class="nx">hoodie</span><span class="p">.</span><span class="nx">share</span><span class="p">(</span><span class="s2">&quot;share_id&quot;</span><span class="p">).</span><span class="nx">remove</span><span class="p">([</span><span class="nx">object1</span><span class="p">,</span> <span class="nx">object2</span><span class="p">]);</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><h2 id="use-cases">Use cases</h2>

<ol>
<li>Public Share</li>
<li>Private Share</li>
<li>Continuous Share</li>
<li>Manual Share</li>
<li>Read only Share</li>
<li>Collaborative Shares</li>
<li>Public, password protected shares</li>
<li>Listen to events in Shares</li>
</ol>

<p>To be done:</p>

<ul>
<li>Loading other users' shares</li>
<li>Subscribe to other users' shares</li>
<li>Change settings (e.g. collaborators) after the share has been created</li>
<li>Differentiate between anonymous users and users with accounts?</li>
<li>user group access?</li>
</ul></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><h3 id="usecase-1-public-share">Usecase 1: Public Share</h3></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>Let's say I've a todolist that I want to share 
publicly with others with an secret URL. First we add the todolist
(by passing an object with the respective type &amp; id) and then
the todolist will be available to others at the secret URL</p></div></div><div class="code"><div class="wrapper"><span class="nx">hoodie</span><span class="p">.</span><span class="nx">share</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span><span class="nx">access</span><span class="o">:</span> <span class="kc">true</span><span class="p">})</span>
<span class="p">.</span><span class="nx">done</span><span class="p">(</span> <span class="kd">function</span><span class="p">(</span><span class="nx">share</span><span class="p">)</span> <span class="p">{</span>
  
  <span class="nx">share</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">todolist</span><span class="p">).</span><span class="nx">push</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">done</span><span class="p">(</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">share_url</span> <span class="o">=</span> <span class="s2">&quot;http://mytodoapp.com/shared/&quot;</span> <span class="o">+</span> <span class="nx">share</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span>
    <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;Share your todolist at &quot;</span> <span class="o">+</span> <span class="nx">share_url</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><h3 id="usecase-2-private-share">Usecase 2: Private Share</h3></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>Let's say I've another todolist that I want to share only 
with my collegues aj@example.com and bj@example.com. I want the todolist to
to be accessible for AJ, BJ and myself only.</p></div></div><div class="code"><div class="wrapper"><span class="nx">hoodie</span><span class="p">.</span><span class="nx">share</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span><span class="nx">access</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;aj@example.com&quot;</span><span class="p">,</span> <span class="s2">&quot;bj@example.com&quot;</span><span class="p">]})</span>
<span class="p">.</span><span class="nx">done</span><span class="p">(</span> <span class="kd">function</span><span class="p">(</span><span class="nx">share</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">share</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">todolist</span><span class="p">);</span>

  <span class="nx">share_url</span> <span class="o">=</span> <span class="s2">&quot;http://mytodoapp.com/shared/&quot;</span> <span class="o">+</span> <span class="nx">share</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span>
  <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;AJ and BJ can access the todolist at &quot;</span> <span class="o">+</span> <span class="nx">share_url</span><span class="p">);</span>
<span class="p">});</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><h3 id="usecase-3-continuous-share">Usecase 3: Continuous Share</h3></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>If you don't want to manually pull and push changes of shared objects, you
can set the share to be continuous. </p></div></div><div class="code"><div class="wrapper"><span class="nx">hoodie</span><span class="p">.</span><span class="nx">share</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span> <span class="p">{</span><span class="nx">continuous</span><span class="o">:</span> <span class="kc">true</span><span class="p">}</span> <span class="p">)</span>
<span class="p">.</span><span class="nx">done</span><span class="p">(</span> <span class="kd">function</span><span class="p">(</span><span class="nx">share</span><span class="p">){</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><ul>
<li>added todolists will be synched right away</li>
</ul></div></div><div class="code"><div class="wrapper">  <span class="nx">share</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">todolist</span><span class="p">);</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><ul>
<li>changes to added todolists will be synched right away</li>
</ul></div></div><div class="code"><div class="wrapper">  <span class="nx">hoodie</span><span class="p">.</span><span class="nx">my</span><span class="p">.</span><span class="nx">store</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">todolist</span><span class="p">,</span> <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;new name&quot;</span><span class="p">});</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><ul>
<li>removed docs will be removed from the share right away</li>
</ul></div></div><div class="code"><div class="wrapper">  <span class="nx">share</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">todolist</span><span class="p">);</span>
<span class="p">});</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><h3 id="usecase-4-manual-share">Usecase 4: Manual Share</h3></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>Manual share means you have to manually push and pull changes of shared
objects, it's the default behavior. Each of the following methods returns
a promise</p></div></div><div class="code"><div class="wrapper"><span class="nx">hoodie</span><span class="p">.</span><span class="nx">share</span><span class="p">(</span><span class="s2">&quot;share_id&quot;</span><span class="p">).</span><span class="nx">push</span><span class="p">();</span>
<span class="nx">hoodie</span><span class="p">.</span><span class="nx">share</span><span class="p">(</span><span class="s2">&quot;share_id&quot;</span><span class="p">).</span><span class="nx">pull</span><span class="p">();</span>
<span class="nx">hoodie</span><span class="p">.</span><span class="nx">share</span><span class="p">(</span><span class="s2">&quot;share_id&quot;</span><span class="p">).</span><span class="nx">sync</span><span class="p">();</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><h3 id="usecase-5-read-only-share">Usecase 5: Read only Share</h3></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>If you want to prevent other users to make changes to your shared objects,
setz <code>access</code> to <code>{ read: true }</code>. If another user will try to push to
<code>hoodie.share("share_id")</code>, it will be rejected.</p></div></div><div class="code"><div class="wrapper"><span class="nx">hoodie</span><span class="p">.</span><span class="nx">share</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span> <span class="p">{</span><span class="nx">access</span><span class="o">:</span> <span class="p">{</span><span class="nx">read</span><span class="o">:</span> <span class="kc">true</span><span class="p">}}</span> <span class="p">);</span>
<span class="nx">hoodie</span><span class="p">.</span><span class="nx">share</span><span class="p">(</span> <span class="s2">&quot;share_id&quot;</span> <span class="p">).</span><span class="nx">push</span><span class="p">();</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><h3 id="usecase-6-collaborative-shares">Usecase 6: Collaborative Shares</h3></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>If you want to invite others to collaborate on your objects, you need
to set the collaborative setting to true. Then all users knowing the 
share.id will be able to push changes.</p></div></div><div class="code"><div class="wrapper"><span class="nx">hoodie</span><span class="p">.</span><span class="nx">share</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span> <span class="p">{</span><span class="nx">access</span><span class="o">:</span> <span class="kc">true</span><span class="p">}</span> <span class="p">)</span>
<span class="p">.</span><span class="nx">done</span><span class="p">(</span> <span class="kd">function</span><span class="p">(</span><span class="nx">share</span><span class="p">){</span>
  <span class="nx">share</span><span class="p">.</span><span class="nx">add</span><span class="p">([</span><span class="nx">todolist</span><span class="p">,</span> <span class="nx">todo1</span><span class="p">,</span> <span class="nx">todo2</span><span class="p">,</span> <span class="nx">todo3</span><span class="p">]).</span><span class="nx">push</span><span class="p">()</span> <span class="p">;</span>
<span class="p">});</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><h3 id="usecase-7-public-password-protected-shares">Usecase 7: Public, password protected shares</h3></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>I can optionally assign a password to a share that needs to be provided by
others when trying to accessing it:</p></div></div><div class="code"><div class="wrapper"><span class="nx">hoodie</span><span class="p">.</span><span class="nx">share</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span> <span class="p">{</span> 
  <span class="nx">acess</span>    <span class="o">:</span> <span class="kc">true</span><span class="p">,</span> 
  <span class="nx">password</span> <span class="o">:</span> <span class="s2">&quot;secret&quot;</span>
<span class="p">}).</span><span class="nx">push</span><span class="p">();</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>If other users want to access your share, they need to passt the password
as option</p></div></div><div class="code"><div class="wrapper"><span class="nx">hoodie</span><span class="p">.</span><span class="nx">share</span><span class="p">(</span> <span class="s2">&quot;mytodolist123&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nx">password</span><span class="o">:</span> <span class="s2">&quot;secret&quot;</span><span class="p">}</span> <span class="p">)</span>
<span class="p">.</span><span class="nx">findAll</span><span class="p">(</span> <span class="kd">function</span><span class="p">(</span><span class="nx">objects</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;welcome to my todolist!&quot;</span><span class="p">);</span>
<span class="p">});</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><h3 id="usecase-8-subscribing-to-events-in-shares">Usecase 8: Subscribing to events in Shares</h3></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>I can open a share and listen to changes of its containing objects</p></div></div><div class="code"><div class="wrapper"><span class="nx">hoodie</span><span class="p">.</span><span class="nx">share</span><span class="p">(</span><span class="s1">&#39;shared_id&#39;</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;changed&#39;</span><span class="p">,</span>        <span class="kd">function</span><span class="p">(</span><span class="nx">object</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/*...*/</span> <span class="p">});</span>
<span class="nx">hoodie</span><span class="p">.</span><span class="nx">share</span><span class="p">(</span><span class="s1">&#39;shared_id&#39;</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;changed:type&#39;</span><span class="p">,</span>   <span class="kd">function</span><span class="p">(</span><span class="nx">object</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/*...*/</span> <span class="p">});</span>
<span class="nx">hoodie</span><span class="p">.</span><span class="nx">share</span><span class="p">(</span><span class="s1">&#39;shared_id&#39;</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;created&#39;</span><span class="p">,</span>        <span class="kd">function</span><span class="p">(</span><span class="nx">object</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/*...*/</span> <span class="p">});</span>
<span class="nx">hoodie</span><span class="p">.</span><span class="nx">share</span><span class="p">(</span><span class="s1">&#39;shared_id&#39;</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;created:type&#39;</span><span class="p">,</span>   <span class="kd">function</span><span class="p">(</span><span class="nx">object</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/*...*/</span> <span class="p">});</span>
<span class="nx">hoodie</span><span class="p">.</span><span class="nx">share</span><span class="p">(</span><span class="s1">&#39;shared_id&#39;</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;updated&#39;</span><span class="p">,</span>        <span class="kd">function</span><span class="p">(</span><span class="nx">object</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/*...*/</span> <span class="p">});</span>
<span class="nx">hoodie</span><span class="p">.</span><span class="nx">share</span><span class="p">(</span><span class="s1">&#39;shared_id&#39;</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;updated:type&#39;</span><span class="p">,</span>   <span class="kd">function</span><span class="p">(</span><span class="nx">object</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/*...*/</span> <span class="p">});</span>
<span class="nx">hoodie</span><span class="p">.</span><span class="nx">share</span><span class="p">(</span><span class="s1">&#39;shared_id&#39;</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;destroyed&#39;</span><span class="p">,</span>      <span class="kd">function</span><span class="p">(</span><span class="nx">object</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/*...*/</span> <span class="p">});</span>
<span class="nx">hoodie</span><span class="p">.</span><span class="nx">share</span><span class="p">(</span><span class="s1">&#39;shared_id&#39;</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;destroyed:type&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">object</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/*...*/</span> <span class="p">});</span></div></div></div></div></body></html>